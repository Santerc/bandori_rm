<!-- 1. 动态模块：文章页显示目录 (INDEX)，其他页显示标签 (TAGS) -->
{{ if .IsPage }}
    <!-- 文章目录 -->
    <div class="widget toc-widget">
        <div class="widget-title">// INDEX_PROTOCOL</div>
        <!-- Hugo 自动生成的目录结构 -->
        <nav id="TableOfContents">
            {{ .TableOfContents }}
        </nav>
    </div>
{{ else }}
    <!-- 热门标签 -->
    <div class="widget">
        <div class="widget-title">// HOT_TAGS</div>
        <div class="tag-cloud">
            <!-- 获取前15个热门标签 -->
            {{ range first 15 .Site.Taxonomies.tags.ByCount }}
            <a href="{{ .Page.Permalink }}" title="{{ .Count }} posts">
                #{{ .Page.Title | upper }}
            </a>
            {{ end }}
        </div>
    </div>
{{ end }}

<!-- 2. 分类归档 (DATABASE) -->
<div class="widget">
    <div class="widget-title">// DATABASE</div>
    <ul class="menu-list">
        {{ range .Site.Taxonomies.categories }}
        <li>
            <a href="{{ .Page.Permalink }}">
                {{ .Page.Title | upper }} 
                <span>[{{ .Count }}]</span>
            </a>
        </li>
        {{ end }}
    </ul>
</div>

<div class="widget">
    <div class="widget-title">// LATEST_LOGS</div>
    <ul class="recent-posts-list">
        {{ range first 5 (where .Site.RegularPages "Section" "posts") }}
        <li>
            <a href="{{ .Permalink }}">{{ .Title }}</a>
            <span class="date">{{ .Date.Format "01-02" }}</span>
        </li>
        {{ end }}
    </ul>
</div>
