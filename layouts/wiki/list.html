{{ define "main" }}

<div class="post-item" style="margin-bottom: 2rem;">
    <!-- é¢åŒ…å±‘å¯¼èˆª -->
    <div style="font-family: 'JetBrains Mono'; font-size: 0.9rem; color: var(--text-muted); margin-bottom: 10px;">
        <a href="{{ `wiki/` | absURL }}">WIKI</a> 
        {{ if ne .RelPermalink "/wiki/" }} / {{ .Title | upper }} {{ end }}
    </div>

    <h1 class="post-title" style="margin: 0;">
        {{ if eq .RelPermalink "/wiki/" }}
            ğŸ“š çŸ¥è¯†åº“æ€»è§ˆ
        {{ else }}
            ğŸ“‚ {{ .Title }}
        {{ end }}
    </h1>
    
    <p style="color: var(--text-muted); margin-top: 10px;">
        {{ .Params.description | default .Summary }}
    </p>
</div>

<div class="wiki-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
    <!-- 
        é€»è¾‘åˆ¤æ–­ï¼š
        1. å¦‚æœæ˜¯ /wiki/ æ ¹ç›®å½•ï¼Œæ˜¾ç¤ºæ‰€æœ‰å­ Section (çŸ¥è¯†åº“)
        2. å¦‚æœæ˜¯ /wiki/xxx/ å­ç›®å½•ï¼Œæ˜¾ç¤ºè¯¥çŸ¥è¯†åº“ä¸‹çš„ Pages (æ–‡ç« )
    -->
    {{ $pages := .Pages }}
    {{ if eq .RelPermalink "/wiki/" }}
        {{ $pages = .Sections }}
    {{ end }}

    {{ range $pages }}
    <a href="{{ .Permalink }}" class="wiki-card" style="
        display: block;
        background: var(--glass-bg);
        border: 1px solid var(--glass-border);
        padding: 1.5rem;
        border-radius: 12px;
        transition: transform 0.3s, border-color 0.3s;
        color: var(--text-main);
        text-decoration: none;
        position: relative;
        overflow: hidden;
    ">
        <!-- è£…é¥°æ€§å›¾æ ‡ -->
        <div style="position: absolute; top: -10px; right: -10px; font-size: 4rem; opacity: 0.05; transform: rotate(15deg);">
            {{ if .IsSection }}ğŸ“{{ else }}ğŸ“„{{ end }}
        </div>

        <h3 style="margin-bottom: 0.5rem; color: var(--primary); display: flex; align-items: center; gap: 8px;">
            {{ if .IsSection }}
                <span style="font-size: 1.2rem;">ğŸ“</span>
            {{ end }}
            {{ .Title }}
        </h3>
        
        <div style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: 1rem; font-family: 'JetBrains Mono';">
            {{ if .IsSection }}
                {{ .Pages | len }} ARTICLES
            {{ else }}
                {{ .Date.Format "2006-01-02" }}
            {{ end }}
        </div>
        
        <p style="font-size: 0.9rem; line-height: 1.5; color: var(--text-muted);">
            {{ .Params.description | default (.Summary | truncate 60) }}
        </p>
    </a>
    {{ end }}
</div>

<style>
    .wiki-card:hover {
        transform: translateY(-5px);
        border-color: var(--primary);
        box-shadow: var(--shadow-glass);
    }
</style>

{{ end }}
